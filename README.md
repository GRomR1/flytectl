<html>
    <p align="center"> 
        <img src="https://raw.githubusercontent.com/flyteorg/static-resources/main/common/flyte_circle_gradient_1_4x4.png" alt="Flyte Logo" width="100">
    </p>
    <h1 align="center">
        FlyteCTL
    </h1>
    <p align="center">
       Flyte's official command-line interface
    </p>
    <h3 align="center">
        <a href="https://flytectl.rtfd.io">Documentation</a>
        <span> ¬∑ </span>
        <a href="https://docs.flyte.org/projects/flytectl/en/stable/contribute.html">Contribution Guide</a>
    </h3>
</html>

[![Docs](https://readthedocs.org/projects/flytectl/badge/?version=latest&style=plastic)](https://flytectl.rtfd.io)
[![Current Release](https://img.shields.io/github/release/flyteorg/flytectl.svg)](https://github.com/flyteorg/flytectl/releases/latest)
![Master](https://github.com/flyteorg/flytectl/workflows/Master/badge.svg)
[![GoDoc](https://godoc.org/github.com/flyteorg/flytectl?status.svg)](https://pkg.go.dev/mod/github.com/flyteorg/flytectl)
[![License](https://img.shields.io/badge/LICENSE-Apache2.0-ff69b4.svg)](http://www.apache.org/licenses/LICENSE-2.0.html)
[![CodeCoverage](https://img.shields.io/codecov/c/github/flyteorg/flytectl.svg)](https://codecov.io/gh/flyteorg/flytectl)
[![Go Report Card](https://goreportcard.com/badge/github.com/flyteorg/flytectl)](https://goreportcard.com/report/github.com/flyteorg/flytectl)
![Commit activity](https://img.shields.io/github/commit-activity/w/lyft/flytectl.svg?style=plastic)
![Commit since last release](https://img.shields.io/github/commits-since/lyft/flytectl/latest.svg?style=plastic)
[![Slack](https://img.shields.io/badge/slack-join_chat-white.svg?logo=slack&style=social)](https://slack.flyte.org)

Flytectl was designed as a portable and lightweight command-line interface to work with Flyte. It is written in Golang and accesses [FlyteAdmin](https://github.com/flyteorg/flyteadmin/), the control plane for Flyte.

## üöÄ Quick Start

1. Install Flytectl with bash or shell script.

    * Bash
        ```bash
        $ brew install flyteorg/homebrew-tap/flytectl
        ```
    * Shell script
        ```bash
        $ curl -sL https://ctl.flyte.org/install | bash
        ```
2. (Optional) `flytectl upgrade` provides a general interface to upgrading Flytectl; run the command in the output.

3. Start Sandbox using Flytectl.
    ```bash
    $ flytectl sandbox start 
    ```

4. Register examples.
    ```bash
    # Register core workflows 
    $ flytectl register examples -d development -p flytesnacks
    ```

<html>
    <h2 id="contribution-guide"> 
        üìñ How to Contribute to Flytectl
    </h2>
</html>

You can find the detailed contribution guide [here](docs/source/contribute.rst).

<html>
    <h2 id="file-an-issue"> 
        üêû File an Issue
    </h2>
</html>

Refer to the [issues](https://docs.flyte.org/en/latest/community/contribute.html#file-an-issue) section in the contribution
guide if you'd like to file an issue.


## Work For New Behavior
Following commands need to work:
flytectl demo init
Just create the local state dir and copy the default config in there.

flytectl demo start
Bring up the new container just like how `make build` and `make start` work in jeev's repo.
* Create the host level state directory ~/.flyte/state if not exists
* Mount state dir into the top-level container as /srv/flyte and run container
* Some logic runs and checks to see if there is a well-known config file name file present. -n flyte.yaml basically.
* If file does not exist, then copy it from another folder from within the image to the state dir. This means
  that the default file cannot depend on a Helm installation (but can be generated by a Helm template).
* Continue bringing up the rest of k3d (k3s? i‚Äôm still confused what is which and where what ends), with a host mount of the state dir.
* Install flyte and run

- Change the dockerfile so that the default config is somewhere.

flytectl demo reload-config
Re-read from the current path by killing the pod, nothing more. 

use-case
Start cluster, update config, restart.
For this to work the default config needs to be put somewhere.
Where can it be written? The state directory. Detect if 

flytectl demo show-config
just print to screen, no writing to a file anywhere.

flytectl demo status

* Tag and push the image
  * will need to update ci/cd to build this image as well.
* Deprecate the --source flag
* up
